<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2014 | Yedeying&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Yedeying's blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Yedeying's blog">
<meta property="og:url" content="http://yedeying999.github.io/archives/2014/">
<meta property="og:site_name" content="Yedeying's blog">
<meta property="og:description" content="Yedeying's blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Yedeying's blog">
<meta name="twitter:description" content="Yedeying's blog">

  
    <link rel="alternative" href="/atom.xml" title="Yedeying&#39;s blog" type="application/atom+xml">
  
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="overlay"></div>
  <div id="header-outer" class="outer">
    <div id="profile_img">
      <img id="circle_img" src="holder.js/150x150" />
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Yedeying&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-menu">
      <nav id="main-nav">
        <ul>
        
          <li><a href="/"><i class="fa fa-home icon-setting"></i></a></li>
        
          <li><a href="/archives"><i class="fa fa-archive icon-setting"></i></a></li>
        
          <li><a href="/about"><i class="fa fa-user icon-setting"></i></a></li>
        
        
          <li><a href="/atom.xml"><i class="fa fa-rss %> icon-setting"></i></a></li>
        
        </ul>
      </nav>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-messagebar-a-plugin-for-alerting-info" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/09/11/messagebar-a-plugin-for-alerting-info/" class="article-date">
  <time datetime="2014-09-11T03:33:36.000Z" itemprop="datePublished">9月 11 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/11/messagebar-a-plugin-for-alerting-info/">messagebar: a plugin for alerting info</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这是一个插件, 一个提示框插件, 十分轻量, 十分精简, 为本人无聊打发时间作品<br>详戳<a href="https://github.com/yedeying999/messagebar" target="_blank" rel="external">github repo</a><br>以下是插件的介绍~~~</p>
<h1 id="messagebar-js">messagebar.js</h1>
<p>This is a plugin for alerting info.</p>
<h3 id="Usage">Usage</h3>
<h4 id="include:">include:</h4>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"messagebar.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div></pre></td></tr></table></figure>

<h4 id="usage:">usage:</h4>
<p>messagebar can be used in the ways shown below</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">messagebar.alert(message);</div><div class="line">messagebar.alert(message, preventAutoClosing);</div><div class="line">messagebar.alert(option);</div></pre></td></tr></table></figure>

<p><strong>Notice:</strong> The variable message is a string you want to alert, then preventAutoClosing means that if you need to click a closing button by yourself to have it disappear. The 3rd line recieve an object to be the arguments, we expect the object to be formatted as below, or you will get an error.<br><strong>option format:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">  <span class="comment">// string: the message you want to show</span></div><div class="line">  message: <span class="string">'you have not input any message'</span>,</div><div class="line">  <span class="comment">// string: a string only include one of left or right and one of up and down, a space to split</span></div><div class="line">  position: <span class="string">'right top'</span>,</div><div class="line">  <span class="comment">// number: a time delay after which the messagebar will show</span></div><div class="line">  delay: <span class="number">0</span>, </div><div class="line">  <span class="comment">// number: if property 'pause' is false, the messagebar will disappear after this time</span></div><div class="line">  time: <span class="number">3000</span>,</div><div class="line">  <span class="comment">// boolean: control that if you need to click a closing button by yourself to have it disappear</span></div><div class="line">  pause: <span class="literal">false</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>tips:</strong> the values of every property of option will be set if you ignore it. That is to say, you can offer any number propertys of the option, if you want to use the default value.</p>
<h4 id="Demo">Demo</h4>
<p><a href="/sites/messagebar/index.html">Here is a demo</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yedeying999.github.io/2014/09/11/messagebar-a-plugin-for-alerting-info/" data-id="e7q2zhg6b9bhe2cy" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-css3-yuan-nei-huan-dong-hua" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/09/02/css3-yuan-nei-huan-dong-hua/" class="article-date">
  <time datetime="2014-09-02T05:32:00.000Z" itemprop="datePublished">9月 2 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CSS3/">CSS3</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/02/css3-yuan-nei-huan-dong-hua/">css3 圆内环动画</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>layout: post<br>title: “css3 圆内环动画”<br>date: 2014-09-02 13:32:37 +0800<br>comments: true<br>categories: CSS3</p>
<h2 id="tags:_animation_css3_sass">tags: animation css3 sass</h2>
<p>某一天, 在网上看到这幅图, 兴趣袭来<br><img src="/images/201409021.gif" alt="Alt circle animation"><br>仔细看, 发现有以下几个特点</p>
<ul>
<li>八个点一直在做直线运动</li>
<li>每个点并非匀速运动</li>
<li>每个点永远处于一个假想内环圆的圆边上  </li>
</ul>
<p>于是就想到去codepen做一个这东西的css版, 来锻炼下自已捉急的CSS水平</p>
<h3 id="首先,_建立html结构">首先, 建立html结构</h3>
<p>这个很简单, 不过为了这个图的每个数量可控性, 这里用jade来写<br>outer类是大圆, inner类是小圆  </p>
<figure class="highlight jade"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">-<span class="built_in">num</span>=(<span class="number">8</span>)</div><div class="line">.outer</div><div class="line">  <span class="keyword">while</span> <span class="built_in">num</span><span class="comment">--</span></div><div class="line">    .inner</div></pre></td></tr></table></figure>

<h3 id="其次,_给结构赋予样式">其次, 给结构赋予样式</h3>
<p>这一步, 要给大圆加上半径, 宽高, 背景各种, 小圆用absolute在大圆内定位, 它们的半径就用<code>$R</code>和<code>$r</code>来表示<br>最初将小圆定位在大圆的中心</p>
<figure class="highlight sass"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$R</span><span class="value">: <span class="number">200px</span>;</span></div><div class="line"><span class="variable">$r</span><span class="value">: <span class="number">25px</span>;</span></div><div class="line"><span class="class">.outer</span> {</div><div class="line">  <span class="attribute">background</span><span class="value">: red;</span></div><div class="line">  <span class="attribute">position</span><span class="value">: relative;</span></div><div class="line">  <span class="attribute">width</span><span class="value">: <span class="variable">$R</span> * <span class="number">2</span>;</span></div><div class="line">  <span class="attribute">height</span><span class="value">: <span class="variable">$R</span> * <span class="number">2</span>;</span></div><div class="line">  <span class="attribute">border-radius</span><span class="value">: <span class="variable">$R</span>;</span></div><div class="line">  <span class="class">.inner</span> {</div><div class="line">    <span class="attribute">position</span><span class="value">: absolute;</span></div><div class="line">    <span class="attribute">left</span><span class="value">: <span class="variable">$R</span>;</span></div><div class="line">    <span class="attribute">top</span><span class="value">: <span class="variable">$R</span>;</span></div><div class="line">    <span class="attribute">background</span><span class="value">: <span class="hexcolor">#fff</span>;</span></div><div class="line">    <span class="attribute">width</span><span class="value">: <span class="variable">$r</span> * <span class="number">2</span>;</span></div><div class="line">    <span class="attribute">height</span><span class="value">: <span class="variable">$r</span> * <span class="number">2</span>;</span></div><div class="line">    <span class="attribute">margin-left</span><span class="value">: <span class="variable">$r</span> * -<span class="number">1</span>;</span></div><div class="line">    <span class="attribute">margin-top</span><span class="value">: <span class="variable">$r</span> * -<span class="number">1</span>;</span></div><div class="line">    <span class="attribute">border-radius</span><span class="value">: <span class="variable">$r</span>;</span></div><div class="line">  }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>然后就得到了它大概的样子</p>
<p><div class="outer"><br>  <style><br>    .outer {<br>      background: red;<br>      position: relative;<br>      width: 400px;<br>      height: 400px;<br>      border-radius: 200px;<br>    }<br>    .outer .inner {<br>      position: absolute;<br>      left: 200px;<br>      top: 200px;<br>      background: #fff;<br>      width: 50px;<br>      height: 50px;<br>      margin-left: -25px;<br>      margin-top: -25px;<br>      border-radius: 25px;<br>    }<br>  </style><br>  <div class="inner"></div><br>  <div class="inner"></div><br>  <div class="inner"></div><br>  <div class="inner"></div><br>  <div class="inner"></div><br>  <div class="inner"></div><br>  <div class="inner"></div><br>  <div class="inner"></div><br></div></p>
<h3 id="接着,_添加动画">接着, 添加动画</h3>
<p>添加动画要注意很多细节:  </p>
<ol>
<li>每个点的初始位置<br>这里可以把对应数量的圆平均分布在一个半圆内, 不过注意这个半圆弧只有一个端点上有圆<br>计算出它们的极角, 再利用sin cos以及圆心, 可以求得它们的left, top值  </li>
<li>每个点的运动延迟时间<br>观察原图, 或者自己画一下分析图, 发现当内圆环绕一圈时, 一个小点会完成一次来回, 也就可以认为一次来或回的时间, 等于每个球的延迟时间 * 数量, 也就可以求得了  </li>
<li>每个点的运动速度变化<br>这是相对难的一部分, 自己从圆环绕这个动作研究了一下每个小圆的运动轨迹, 发现它的速度变化和三角函数有着很大的联系, 但CSS提供的是三次贝塞尔曲线函数, 所以退了一步找到一个相似的时间函数  </li>
</ol>
<p>最终结果如下:</p>
<figure class="highlight sass"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$R</span><span class="value">: <span class="number">200px</span>;</span></div><div class="line"><span class="variable">$r</span><span class="value">: <span class="number">2px</span>;</span></div><div class="line"><span class="variable">$speed</span><span class="value">: <span class="number">1s</span>;</span></div><div class="line"><span class="variable">$num</span><span class="value">: <span class="number">64</span>;</span></div><div class="line"><span class="variable">$radius</span><span class="value">: <span class="variable">$R</span> - <span class="variable">$r</span>;</span></div><div class="line"><span class="variable">$i</span><span class="value">: <span class="variable">$num</span>;</span></div><div class="line"><span class="at_rule">@<span class="keyword">while</span> <span class="variable">$i</span> &gt;<span class="preprocessor"> 0</span> {</span></div><div class="line">  <span class="at_rule">@keyframes<span class="preprocessor"> move</span>#{</span><span class="variable">$i</span>} {</div><div class="line">    <span class="variable">$angle</span><span class="value">: (<span class="variable">$i</span> - <span class="number">1</span>) * <span class="number">180</span> / <span class="variable">$num</span>;</span></div><div class="line">    from {</div><div class="line">      <span class="attribute">left</span><span class="value">: <span class="variable">$R</span> - <span class="variable">$radius</span> * <span class="function">sin</span>(<span class="variable">$angle</span> * <span class="function">pi</span>() / <span class="number">180</span>);</span></div><div class="line">      <span class="attribute">top</span><span class="value">: <span class="variable">$R</span> - <span class="variable">$radius</span> * <span class="function">cos</span>(<span class="variable">$angle</span> * <span class="function">pi</span>() / <span class="number">180</span>);</span></div><div class="line">    } to {</div><div class="line">      <span class="attribute">left</span><span class="value">: <span class="variable">$R</span> + <span class="variable">$radius</span> * <span class="function">sin</span>(<span class="variable">$angle</span> * <span class="function">pi</span>() / <span class="number">180</span>);</span></div><div class="line">      <span class="attribute">top</span><span class="value">: <span class="variable">$R</span> + <span class="variable">$radius</span> * <span class="function">cos</span>(<span class="variable">$angle</span> * <span class="function">pi</span>() / <span class="number">180</span>);</span></div><div class="line">    }</div><div class="line">  }</div><div class="line">  <span class="variable">$i</span><span class="value">: <span class="variable">$i</span> - <span class="number">1</span>;</span></div><div class="line">}</div><div class="line"><span class="class">.outer</span> {</div><div class="line">  <span class="attribute">background</span><span class="value">: red;</span></div><div class="line">  <span class="attribute">position</span><span class="value">: relative;</span></div><div class="line">  <span class="attribute">width</span><span class="value">: <span class="variable">$R</span> * <span class="number">2</span>;</span></div><div class="line">  <span class="attribute">height</span><span class="value">: <span class="variable">$R</span> * <span class="number">2</span>;</span></div><div class="line">  <span class="attribute">border-radius</span><span class="value">: <span class="variable">$R</span>;</span></div><div class="line">  <span class="class">.inner</span> {</div><div class="line">    <span class="attribute">position</span><span class="value">: absolute;</span></div><div class="line">    <span class="attribute">left</span><span class="value">: <span class="variable">$R</span>;</span></div><div class="line">    <span class="attribute">top</span><span class="value">: <span class="variable">$R</span>;</span></div><div class="line">    <span class="attribute">background</span><span class="value">: <span class="hexcolor">#fff</span>;</span></div><div class="line">    <span class="attribute">width</span><span class="value">: <span class="variable">$r</span> * <span class="number">2</span>;</span></div><div class="line">    <span class="attribute">height</span><span class="value">: <span class="variable">$r</span> * <span class="number">2</span>;</span></div><div class="line">    <span class="attribute">margin-left</span><span class="value">: <span class="variable">$r</span> * -<span class="number">1</span>;</span></div><div class="line">    <span class="attribute">margin-top</span><span class="value">: <span class="variable">$r</span> * -<span class="number">1</span>;</span></div><div class="line">    <span class="attribute">border-radius</span><span class="value">: <span class="variable">$r</span>;</span></div><div class="line">    <span class="attribute">animation-duration</span><span class="value">: <span class="variable">$speed</span>;</span></div><div class="line">    <span class="attribute">animation-iteration-count</span><span class="value">: infinite;</span></div><div class="line">    <span class="attribute">animation-direction</span><span class="value">: alternate;</span></div><div class="line">    <span class="attribute">animation-timing-function</span><span class="value">: <span class="function">cubic-bezier</span>(<span class="number">0.4</span>,<span class="number">0</span>,<span class="number">0.6</span>,<span class="number">1</span>);</span></div><div class="line">    <span class="variable">$i</span><span class="value">: <span class="variable">$num</span>;</span></div><div class="line">    <span class="at_rule">@<span class="keyword">while</span> <span class="variable">$i</span> &gt;<span class="preprocessor"> 0</span> {</span></div><div class="line">      &<span class="pseudo">:nth-of-type</span>(#{<span class="variable">$i</span>}) {</div><div class="line">        <span class="attribute">animation-delay</span><span class="value">: <span class="variable">$speed</span> / <span class="variable">$num</span> * (<span class="variable">$i</span> - <span class="number">1</span>);</span></div><div class="line">        <span class="attribute">animation-name</span><span class="value">: move#{<span class="variable">$i</span>};</span></div><div class="line">      }</div><div class="line">      <span class="variable">$i</span><span class="value">: <span class="variable">$i</span> - <span class="number">1</span>;</span></div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>为增强效果, 我把数量由8改成了64, 然后更加赞叹了, 竟然是由直线运动组成的</p>
<p>DEMO:</p>
<iframe id="cp_embed_hjHkb" src="//codepen.io/yedeying999/embed/hjHkb?height=300&theme-id=result&slug-hash=hjHkb&default-tab=500" scrolling="no" frameborder="0" height="300" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yedeying999.github.io/2014/09/02/css3-yuan-nei-huan-dong-hua/" data-id="9t5c4nsft2kyzlqq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/animation/">animation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css3/">css3</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sass/">sass</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-javascript-cross-origin-studying" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/08/27/javascript-cross-origin-studying/" class="article-date">
  <time datetime="2014-08-27T07:49:49.000Z" itemprop="datePublished">8月 27 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/27/javascript-cross-origin-studying/">javascript 跨域学习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>项目地址: <a href="https://github.com/yedeying999/cross-origin-try" target="_blank" rel="external">https://github.com/yedeying999/cross-origin-try</a></p>
<h2 id="1-_Cross_Origin_Resource_Sharing(CORS)_跨域资源共享">1. Cross Origin Resource Sharing(CORS) 跨域资源共享</h2>
<h3 id="兼容性:">兼容性:</h3>
<pre><code><span class="title">IE</span> <span class="number">8</span> +
Firefox <span class="number">15</span>.<span class="number">0</span> +
Chrome <span class="number">22</span>.<span class="number">0</span> +
Safari <span class="number">5</span>.<span class="number">1</span> +
Opera <span class="number">12</span>.<span class="number">0</span> +
IOS Safari <span class="number">3</span>.<span class="number">2</span> +
Android <span class="number">2</span>.<span class="number">1</span> +
Blackberry Browser <span class="number">7</span>.<span class="number">0</span> +
</code></pre><h3 id="实现手段:">实现手段:</h3>
<pre><code>数据端:
    设置Access-Control-Allow-Origin头, 值为<span class="keyword">*</span>或对应要访问的域名
客户端:
    IE8-9使用 XDomainRequest
    其它客户端使用标准AJAX方法
</code></pre><h3 id="评价:">评价:</h3>
<pre><code>数据安全性良好, 支持大量数据, 支持POST, 但兼容性要求相比其它略高
</code></pre><h3 id="示例:">示例:</h3>
<p>客户端 index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"ye"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">createXHR</span><span class="params">()</span> </span>{</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">window</span>.XDomainRequest) {</div><div class="line">          <span class="keyword">return</span> <span class="keyword">new</span> XDomainRequest();</div><div class="line">        }</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">window</span>.XMLHttpRequest) {</div><div class="line">          <span class="keyword">return</span> <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">        }</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">window</span>.ActiveXObject) {</div><div class="line">          <span class="keyword">return</span> <span class="keyword">new</span> ActiveXObject(<span class="string">'Microsoft.XMLHTTP'</span>);</div><div class="line">        }</div><div class="line">        <span class="keyword">else</span> {</div><div class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'no xhr'</span>);</div><div class="line">        }</div><div class="line">      }</div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">parse</span><span class="params">()</span> </span>{</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">window</span>.JSON) {</div><div class="line">          <span class="keyword">var</span> x = <span class="built_in">JSON</span>.parse(xhr.responseText);</div><div class="line">          <span class="built_in">document</span>.getElementById(<span class="string">'ye'</span>).innerHTML = x.name;</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">          <span class="built_in">document</span>.getElementById(<span class="string">'ye'</span>).innerHTML = xhr.responseText;</div><div class="line">        }</div><div class="line">      }</div><div class="line">      <span class="keyword">var</span> xhr = createXHR();</div><div class="line">      <span class="keyword">var</span> url = <span class="string">'http://localhost:3000'</span>;</div><div class="line">      xhr.open(<span class="string">"post"</span>, url, <span class="literal">true</span>);</div><div class="line">      xhr.onreadystatechange = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">        <span class="keyword">if</span>(xhr.readyState === <span class="number">4</span>) {</div><div class="line">          parse();</div><div class="line">        }</div><div class="line">      }</div><div class="line">      <span class="keyword">if</span>(<span class="built_in">window</span>.XDomainRequest) {</div><div class="line">        xhr.onload = parse;</div><div class="line">      }</div><div class="line">      xhr.send(<span class="string">'data=hehe'</span>);</div><div class="line">    };</div><div class="line">  <span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>服务端 nodejs</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">var</span> router = express.Router();</div><div class="line"></div><div class="line"><span class="comment">/* POST home page. */</span></div><div class="line">router.post(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span><span class="params">(req, res)</span> </span>{</div><div class="line">  res.header(<span class="string">'Access-Control-Allow-Origin'</span>, <span class="string">'*'</span>);</div><div class="line">  <span class="keyword">var</span> arr = [];</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> req)</div><div class="line">    arr.push(i);</div><div class="line">  arr.sort();</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> arr)</div><div class="line">    <span class="built_in">console</span>.log(arr[i]);</div><div class="line">  <span class="built_in">console</span>.dir(req.param(<span class="string">'data'</span>));</div><div class="line">  <span class="comment">// console.dir(req);</span></div><div class="line">  res.send({</div><div class="line">    name: <span class="string">'yedeying'</span>,</div><div class="line">    age: <span class="number">20</span></div><div class="line">  });</div><div class="line">});</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = router;</div></pre></td></tr></table></figure>

<h2 id="2-_Cross_Document_Messaging_跨文档消息传输">2. Cross Document Messaging 跨文档消息传输</h2>
<h3 id="兼容性:-1">兼容性:</h3>
<pre><code><span class="title">IE</span> <span class="number">8</span> +
Firefox <span class="number">3</span>.<span class="number">0</span> +
Chrome <span class="number">3</span>.<span class="number">0</span> +
Safari <span class="number">4</span>.<span class="number">0</span> +
Opera <span class="number">9</span>.<span class="number">0</span> +
</code></pre><h3 id="实现手段:-1">实现手段:</h3>
<pre><code>HTML5的postMessage和onmessage API, 配合iframe实现
    <span class="number">1</span>. 在要访问数据的页面<span class="literal">A</span>创建iframe, 指向保存数据的页面B
    <span class="number">2</span>. 页面<span class="literal">A</span>通过iframe.contentWindow.postMessage向页面B发送请求及数据, 数据格式可以为JSON或字符串等
    <span class="number">3</span>. 页面B通过onmessage监听页面<span class="literal">A</span>发来的请求, 并通过window.parent.postMessage向页面<span class="literal">A</span>反馈信息
</code></pre><h3 id="评价:-1">评价:</h3>
<pre><code>兼容性相比CORS方式更优
</code></pre><h3 id="样例:">样例:</h3>
<p>客户端 index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">button</span> <span class="attribute">onclick</span>=<span class="value">"handler()"</span>&gt;</span>发信<span class="tag">&lt;/<span class="title">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">input</span> <span class="attribute">id</span>=<span class="value">"value"</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">placeholder</span>=<span class="value">"请输入信息"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">iframe</span> <span class="attribute">src</span>=<span class="value">"./frame.html"</span> <span class="attribute">frameborder</span>=<span class="value">"0"</span> <span class="attribute">width</span>=<span class="value">"100%"</span> <span class="attribute">height</span>=<span class="value">"100%"</span>&gt;</span><span class="tag">&lt;/<span class="title">iframe</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> input = <span class="built_in">document</span>.querySelector(<span class="string">'#value'</span>);</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handler</span><span class="params">()</span> </span>{</div><div class="line">      <span class="built_in">document</span>.querySelector(<span class="string">'iframe'</span>).contentWindow.postMessage(input.value, <span class="string">'*'</span>);</div><div class="line">    }</div><div class="line">  <span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>服务端 frame.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>ye<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">h1</span>&gt;</span><span class="tag">&lt;/<span class="title">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span></div><div class="line">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">        <span class="keyword">var</span> h1 = <span class="built_in">document</span>.querySelector(<span class="string">'h1'</span>);</div><div class="line">        h1.innerHTML = <span class="string">'you have not post any message'</span>;</div><div class="line">        <span class="built_in">window</span>.onmessage = <span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>{</div><div class="line">          h1.innerHTML = e.data;</div><div class="line">        }</div><div class="line">      };</div><div class="line">    <span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<h2 id="3-_使用window-name解决跨域问题">3. 使用window.name解决跨域问题</h2>
<h3 id="兼容性:-2">兼容性:</h3>
<pre><code>几乎所有浏览器都支持
</code></pre><h3 id="实现手段:-2">实现手段:</h3>
<pre><code>一个页面在更改<span class="built_in">document</span>.location前后, 其<span class="built_in">window</span>.name属性不变.
利用此特性:
    <span class="number">1.</span> 用一个iframe指向数据页面A, 将需要传输的数据存到<span class="built_in">window</span>.name里
    <span class="number">2.</span> 将其location指向一个与申请页面B同域名的代理页面C
    <span class="number">3.</span> 在B页面或C页面把<span class="built_in">window</span>.name的内容由页面C传送到页面B
</code></pre><h3 id="评价:-2">评价:</h3>
<pre><code>接近完美, 只是实现手段有点绕
</code></pre><h3 id="样例:-1">样例:</h3>
<p>客户端 index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">button</span> <span class="attribute">onclick</span>=<span class="value">'getInfo()'</span>&gt;</span>获取数据<span class="tag">&lt;/<span class="title">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">p</span> <span class="attribute">id</span>=<span class="value">'text'</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span><span class="params">()</span> </span>{</div><div class="line">      <span class="keyword">var</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>),</div><div class="line">        bl = <span class="literal">true</span>;</div><div class="line">      iframe.style.display = <span class="string">'none'</span>;</div><div class="line">      iframe.onload = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">        <span class="keyword">if</span>(bl) {</div><div class="line">          iframe.contentWindow.location = <span class="string">'./proxy.html?callback=callback'</span>;</div><div class="line">          bl = <span class="literal">false</span>;</div><div class="line">        }</div><div class="line">      }</div><div class="line">      iframe.src = <span class="string">'http://localhost:3000'</span>;</div><div class="line">      <span class="built_in">document</span>.body.appendChild(iframe);</div><div class="line">    }</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">callback</span><span class="params">(data)</span> </span>{</div><div class="line">      <span class="built_in">document</span>.getElementById(<span class="string">'text'</span>).innerHTML = data;</div><div class="line">    }</div><div class="line">  <span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>数据端 data.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Data<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="built_in">window</span>.name = <span class="string">'the information I want to send'</span>;</div><div class="line">  <span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>代理端 proxy.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> callback = location.search.split(<span class="string">'='</span>)[<span class="number">1</span>];</div><div class="line">    <span class="built_in">window</span>.parent[callback](<span class="built_in">window</span>.name);</div><div class="line">  <span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<h2 id="4-_jsonp">4. jsonp</h2>
<h3 id="兼容性:-3">兼容性:</h3>
<pre><code>几乎所有浏览器都支持
</code></pre><h3 id="实现手段:-3">实现手段:</h3>
<pre><code>HTML中script的src标签可以跨域申请javascript文本, 属于GET方法, 服务器只要对URL响应返回对应的数据就可以达到目的, 但客户端要求javascript语句, 而json等文本并非javascript语句, 此时将其封装成回调函数即可

客户端:
    中在目标url后加入?<span class="keyword">callback</span>=cb之类的字眼, 其中<span class="keyword">callback</span>及cb都可以自定, <span class="keyword">callback</span>代表服务器端识别的关键字, cb代表客户端中用以回调数据的全局函数
服务端:
    <span class="number">1.</span> 接收到请求时, 通过约定的key获取回调函数的名字cb
    <span class="number">2.</span> 设置响应头的Content-Type: text/javascript
    <span class="number">3.</span> 通过读取对应的json文件, 返回cb(jsonData)这样的格式
</code></pre><h3 id="评价:-3">评价:</h3>
<pre><code>兼容性完美, 但因为请求信息通过url传送, 所以传送数据不能太大, 即使浏览器能容纳也不直观, 适合只传送某些参数的情况, 另外不支持POST
</code></pre><h3 id="样例:-2">样例:</h3>
<p>客户端 html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"ye"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">callback</span><span class="params">(data)</span> </span>{</div><div class="line">      <span class="keyword">if</span>(data) {</div><div class="line">        <span class="built_in">document</span>.getElementById(<span class="string">'ye'</span>).innerHTML = data.name + <span class="string">' is at age '</span> + data.age;</div><div class="line">      }</div><div class="line">    }</div><div class="line">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">      <span class="keyword">var</span> scr = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line">      <span class="built_in">document</span>.body.appendChild(scr);</div><div class="line">      scr.src = <span class="string">'http://localhost/ye/jsonp/data.php?callback=callback'</span>;</div><div class="line">    };</div><div class="line">  <span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>数据端 data.php</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">&lt;?php</span></div><div class="line">  header(<span class="string">"Content-type:text/Javascript"</span>);</div><div class="line">  <span class="keyword">echo</span> <span class="variable">$_GET</span>[<span class="string">'callback'</span>].<span class="string">'('</span>;</div><div class="line">  <span class="variable">$txt</span> = readfile(<span class="string">'data.json'</span>);</div><div class="line">  <span class="keyword">echo</span> <span class="string">')'</span>;</div><div class="line"><span class="preprocessor">?&gt;</span></div></pre></td></tr></table></figure>

<p>数据 data.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">  "<span class="attribute">name</span>": <span class="value"><span class="string">"yedeying"</span></span>,</div><div class="line">  "<span class="attribute">age</span>": <span class="value"><span class="number">18</span></span></div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="5-_Websocket">5. Websocket</h2>
<h3 id="兼容性:-4">兼容性:</h3>
<pre><code><span class="title">Chrome</span> <span class="number">4</span>+
Firefox <span class="number">4</span>+
Internet Explorer <span class="number">10</span>+
Opera <span class="number">10</span>+
Safari <span class="number">5</span>+
</code></pre><h3 id="实现手段:-4">实现手段:</h3>
<pre><code>HTML5的websocket协议, 至今多数服务端都已支持websocket
</code></pre><h3 id="评价:-4">评价:</h3>
<pre><code>websocket实际上应该是作为全双工连接最标准的实现方式, 因此可以用到跨域问题上, 奈何其兼容性不够好
</code></pre><h3 id="样例:-3">样例:</h3>
<p>客户端 index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Socket.IO<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">h2</span> <span class="attribute">id</span>=<span class="value">"p"</span>&gt;</span><span class="tag">&lt;/<span class="title">h2</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/socket.io/socket.io.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span></div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">$</span><span class="params">(str)</span> </span>{ <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(str); }</div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">(str)</span> </span>{ p.innerHTML = str; }</div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">callback</span><span class="params">(data)</span> </span>{</div><div class="line">        data = <span class="built_in">JSON</span>.parse(data);</div><div class="line">        show(data.name + <span class="string">' is at age '</span> + data.age);</div><div class="line">      }</div><div class="line">      <span class="keyword">var</span> p = $(<span class="string">'p'</span>), socket = io();</div><div class="line">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">        socket.emit(<span class="string">'getData'</span>);</div><div class="line">      }</div><div class="line">      socket.on(<span class="string">'data'</span>, callback);</div><div class="line">    <span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>服务端 nodejs index.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> app = <span class="built_in">require</span>(<span class="string">'express'</span>)();</div><div class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>).Server(app);</div><div class="line"><span class="keyword">var</span> io = <span class="built_in">require</span>(<span class="string">'socket.io'</span>)(http);</div><div class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</div><div class="line"></div><div class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span><span class="params">(req, res)</span> </span>{</div><div class="line">  res.sendfile(<span class="string">'index.html'</span>);</div><div class="line">});</div><div class="line"></div><div class="line">io.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span><span class="params">(socket)</span> </span>{</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'a user connected'</span>);</div><div class="line">  socket.on(<span class="string">'getData'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    fs.readFile(<span class="string">'data.json'</span>, {encoding: <span class="string">'utf8'</span>}, <span class="function"><span class="keyword">function</span><span class="params">(err, data)</span> </span>{</div><div class="line">      <span class="keyword">if</span> (err) <span class="keyword">throw</span> <span class="keyword">new</span> err;</div><div class="line">      socket.emit(<span class="string">'data'</span>, data);</div><div class="line">    });</div><div class="line">  });</div><div class="line">});</div><div class="line"></div><div class="line">http.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'listening on *:3000'</span>);</div><div class="line">});</div></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yedeying999.github.io/2014/08/27/javascript-cross-origin-studying/" data-id="hwi2lrlyziqs1qbp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cross-origin/">cross-origin</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-canvas-studying" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/08/20/canvas-studying/" class="article-date">
  <time datetime="2014-08-20T08:48:14.000Z" itemprop="datePublished">8月 20 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/20/canvas-studying/">canvas学习 - 动态绘制五角星</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <iframe id="cp_embed_fbrat" src="//codepen.io/yedeying999/embed/fbrat?height=300&theme-id=javascript&slug-hash=fbrat&default-tab=800" scrolling="no" frameborder="0" height="300" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yedeying999.github.io/2014/08/20/canvas-studying/" data-id="0kminrto5ecxhm7t" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-RCP-studying" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/15/RCP-studying/" class="article-date">
  <time datetime="2014-07-15T03:10:32.000Z" itemprop="datePublished">7月 15 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/other/">other</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/15/RCP-studying/">RCP学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">一些model特征:</div><div class="line">    Trimmed Window: 带最小化最大化的窗体</div><div class="line">    Perspective <span class="keyword">Stack</span>: 装载Perspective的容器</div><div class="line">    Perspective：一个透视，可以直接包含PartSashContainer, <span class="keyword">Part</span> <span class="keyword">Stack</span>或<span class="keyword">Part</span></div><div class="line">    PartSashContainer: 装载<span class="keyword">Part</span> <span class="keyword">Stack</span>的容器</div><div class="line">    <span class="keyword">Part</span> <span class="keyword">Stack</span>: 可以装载多个<span class="keyword">Part</span>, 分多个标签栏显示</div><div class="line">    <span class="keyword">Part</span>: 一个标签以及对应的editor, 可通过URI定位代码类来扩展内容</div><div class="line">SWT:</div><div class="line">    组件:</div><div class="line">        <span class="keyword">Text</span> 输入框</div><div class="line">        <span class="keyword">Button</span> 按钮</div><div class="line">        Browser 浏览器</div><div class="line">    事件:</div><div class="line">        addSelectionListener方法，new SelectionAdapeor()类作为参数，或实现SelectionListener接口的类</div><div class="line">ANNOTATION API:</div><div class="line">    @PostConstruct: 将于构建组件时被调用</div><div class="line">    @PreDestroy: 将于摧毁组件前被调用</div><div class="line">    @Focus: 当组件或得焦点时被调用</div><div class="line">    @Persists: 当保存状态改变时被调用</div><div class="line">    @PersistState: 在@PreDestroy及摧毁组件前被调用，主要用于保存Persist信息</div><div class="line">TIPS:</div><div class="line">    关于事件参数，*Adapter类为实现了默认参数的*Listener类，无须强制重载</div></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yedeying999.github.io/2014/07/15/RCP-studying/" data-id="9y8flrdnsapoyadc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rcp/">rcp</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-pei-zhi-node" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/22/pei-zhi-node/" class="article-date">
  <time datetime="2014-05-22T07:50:17.000Z" itemprop="datePublished">5月 22 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/22/pei-zhi-node/">配置node与express初试</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://www.nodejs.org/" target="_blank" rel="external">http://www.nodejs.org/</a>下载对应系统的node版本并安装<br><br>用npm包管理器安装需要的包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> npm install -g express</div><div class="line"><span class="built_in">sudo</span> npm install -g express-generator</div><div class="line"><span class="built_in">sudo</span> npm install -g coffee-script</div></pre></td></tr></table></figure>

<p>找一个目录，运行以下命令创建一个工程，并运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">express [<span class="operator">-e</span>] hello</div><div class="line"><span class="built_in">cd</span> hello</div><div class="line">npm install</div><div class="line">./bin/www</div></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yedeying999.github.io/2014/05/22/pei-zhi-node/" data-id="vk146kv55coifwir" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/express/">express</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-audio-and-video-biao-qian" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/28/audio-and-video-biao-qian/" class="article-date">
  <time datetime="2014-04-28T13:18:06.000Z" itemprop="datePublished">4月 28 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/html/">html</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/28/audio-and-video-biao-qian/">标签audio及其用法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="可用属性:">可用属性:</h4>
<ul>
<li>src  来源，一般为一个url</li>
<li>autoplay  是否自动播放</li>
<li>controls  是否加载控制面板</li>
<li>loop  是否循环播放</li>
<li>muted  表示是否静音的布尔值</li>
<li>preload  是否预加载，可选值为none(不加载), metadata(加载元数据), auto(default值，预加载)</li>
</ul>
<h4 id="Javascript加CSS写一简单播放器">Javascript加CSS写一简单播放器</h4>
<p><br></p>
<iframe id="cp_embed_yedeying999" src="//codepen.io/jsyAi/embed/yedeying999?height=300&theme-id=html&slug-hash=yedeying999&default-tab=763" scrolling="no" frameborder="0" height="300" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" style="width: 100%; overflow: hidden;"></iframe>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yedeying999.github.io/2014/04/28/audio-and-video-biao-qian/" data-id="nvsptb2vt0asncb5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/audio/">audio</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html/">html</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html5/">html5</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-yong-octopressda-jian-github-page" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/28/yong-octopressda-jian-github-page/" class="article-date">
  <time datetime="2014-04-27T16:00:00.000Z" itemprop="datePublished">4月 28 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<p>layout: post<br>title: “用octopress搭建github page”<br>date: “2014-04-28 14:32:04 +0800”<br>comments: true<br>categories:other</p>
<h2 id="tags:-_blog">tags:- blog</h2>
<p>尝试和失败了无数次，终于把博客搭好了，以下简述下我的搭建过程。</p>
<p>引言</p>
<blockquote>
<p><a href="http://octopress.org/" target="_blank" rel="external">Octopress</a>是利用<a href="http://jekyllrb.com/" target="_blank" rel="external">Jekyll</a>博客引擎开发的一个博客系统，生成的静态页面能够很好的在<a href="https://pages.github.com/" target="_blank" rel="external">github page</a>上展现。号称是hacker专属的一个博客系统(A blogging framework for hackers.)</p>
</blockquote>
<p>目录</p>
<ol>
<li>配置环境</li>
<li>安装octopress</li>
<li>配置github</li>
<li>配置octopress</li>
<li>开始部署</li>
<li>完成</li>
<li>一些小技巧</li>
</ol>
<h3 id="配置环境">配置环境</h3>
<p>安装octopress需要ruby和git环境，Mac OS 10.9 上自带有ruby和git环境，故不作述。<br>(大家可以检查下自己的ruby gem和git是否有正确配置好)</p>
<p>(以下命令请自觉用sudo来执行，不然可能有权限问题)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ruby --version</div><div class="line">git --version</div><div class="line">gem --version</div></pre></td></tr></table></figure>

<p>安装rbenv</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">git clone git://github.com/sstephenson/rbenv.git ~/.rbenv</div><div class="line"><span class="comment"># 用来编译安装 ruby</span></div><div class="line">git clone git://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build</div><div class="line"><span class="comment"># 用来管理 gemset, 可选, 因为有 bundler 也没什么必要</span></div><div class="line">git clone git://github.com/jamis/rbenv-gemset.git  ~/.rbenv/plugins/rbenv-gemset</div><div class="line"><span class="comment"># 通过 gem 命令安装完 gem 后无需手动输入 rbenv rehash 命令, 推荐</span></div><div class="line">git clone git://github.com/sstephenson/rbenv-gem-rehash.git ~/.rbenv/plugins/rbenv-gem-rehash</div><div class="line"><span class="comment"># 通过 rbenv update 命令来更新 rbenv 以及所有插件, 推荐</span></div><div class="line">git clone https://github.com/rkh/rbenv-update.git ~/.rbenv/plugins/rbenv-update</div></pre></td></tr></table></figure>

<p>然后把下面的代码放到<code>~/.bash_profile</code>里</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> PATH=<span class="string">"<span class="variable">$HOME</span>/.rbenv/bin:<span class="variable">$PATH</span>"</span></div><div class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(rbenv init -)</span>"</span></div></pre></td></tr></table></figure>

<h3 id="安装octopress">安装octopress</h3>
<p>通过以下命令安装</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git clone git://github.com/imathis/octopress.git octopress</div><div class="line"><span class="built_in">cd</span> octopress</div></pre></td></tr></table></figure>

<p>接下来安装依赖项</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">gem install bundle <span class="comment"># 等待强迫症患者可以像我一样，在最后加个-V，这样它会告诉你已经进行到哪里</span></div><div class="line">rbenv rehash</div><div class="line">bundle install</div></pre></td></tr></table></figure>

<p>安装默认的Octopress主题</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rake install <span class="comment"># 若提示错误可尝试在其前加上bundle exec(原因是某些版本不一致)</span></div></pre></td></tr></table></figure>

<h3 id="配置github">配置github</h3>
<p>要想把页面展示在<a href="https://github.com/" target="_blank" rel="external">github</a>上，请保证你已经注册了一个github帐号，然后创建一个名为<code>你的用户名.github.io</code>的仓库，并保存下它的github地址<code>example: https://github.com/yedeying999/yedeying999.github.io</code></p>
<h3 id="配置octopress">配置octopress</h3>
<p>进入octopress文件夹</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> octopress</div></pre></td></tr></table></figure>

<p>编辑配置文件<code>_config.yml</code>，修改其中的<code>url</code>，填上刚刚的github仓库地址，然后还有就是<code>title</code> <code>subtitle</code> <code>author</code>这些，名字都写的很清楚了，根据自己的来填</p>
<p>接着，建议把文件末部的twitter, facebook, google plus等配置给注释掉，因为这些都是GFW以外的东西，会导致网页速度缓慢，同理，修改定制文件/source/_includes/custom/head.html 把google的自定义字体去掉。</p>
<h3 id="开始部署">开始部署</h3>
<p>执行以下命令</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 不行加bundle exec，原理同上，下同</span></div><div class="line">rake setup_github_pages  <span class="comment">#命令会要求我们输入github地址，还是刚刚那个仓库地址</span></div></pre></td></tr></table></figure>



<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rake new_post[<span class="string">'title'</span>]</div></pre></td></tr></table></figure>

<p>然后进入<code>source/_post</code>中会看到20xx-xx-xx-title.md，title是自定义的，然后我们就可以通过编辑这个markdown文档来写博客啦，写完之后</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">rake generate <span class="comment"># 把source里面的内容，生成到_deploy文件夹</span></div><div class="line">rake deploy   <span class="comment"># 把_deploy的内容上传到github上</span></div><div class="line"><span class="comment"># 以上两命令在每次写新博文时都要执行一次</span></div><div class="line">rake preview  <span class="comment"># 可通过该命令在本地浏览生成的博客，地址http://localhost:4000</span></div></pre></td></tr></table></figure>

<h3 id="完成">完成</h3>
<p>做完这一切后，我们就可以通过<code>http://你的用户名.github.io</code>来访问你的博客了</p>
<h3 id="一些小技巧">一些小技巧</h3>
<p>作为一个懒人，我当然不想每次都敲那么长命令来写博客啦，所以</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">vim ~/deploy.sh</div><div class="line">vim ~/new.sh</div></pre></td></tr></table></figure>

<p>分别加入以下内容</p>
<figure class="highlight sh"><figcaption><span>deplog.sh</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> ~/octopress</div><div class="line">bundle <span class="keyword">exec</span> rake generate</div><div class="line">bundle <span class="keyword">exec</span> rake deploy</div></pre></td></tr></table></figure>



<figure class="highlight sh"><figcaption><span>new.sh</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> ~/octopress</div><div class="line">bundle <span class="keyword">exec</span> rake new_post[<span class="variable">$1</span>]</div></pre></td></tr></table></figure>

<p>然后，为普通用户添加执行权限</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> chmod a+x deploy.sh</div><div class="line"><span class="built_in">sudo</span> chmod a+x new.sh</div></pre></td></tr></table></figure>

<p>大家应该都看得出，deploy就是发布的懒操作，而new就是新建博客的懒操作，用法如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">./new.sh name <span class="comment"># name就是新博文的名字</span></div><div class="line">./deploy.sh</div></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yedeying999.github.io/2014/04/28/yong-octopressda-jian-github-page/" data-id="dbglnpwb7jnsmy6h" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-install-ruby" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/22/install-ruby/" class="article-date">
  <time datetime="2014-04-22T06:16:47.000Z" itemprop="datePublished">4月 22 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/other/">other</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/22/install-ruby/">install ruby and ruby gem</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> apt-get install ruby</div><div class="line"><span class="comment">#find an folder and:</span></div><div class="line">git clone https://github.com/rubygems/rubygems.git</div><div class="line"><span class="built_in">cd</span> rubygem</div><div class="line">ruby setup.rb</div></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yedeying999.github.io/2014/04/22/install-ruby/" data-id="ygothyt0db65ruam" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/install/">install</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ruby/">ruby</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sublime-cpp-builder" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/18/sublime-cpp-builder/" class="article-date">
  <time datetime="2014-04-18T13:21:56.000Z" itemprop="datePublished">4月 18 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/other/">other</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/18/sublime-cpp-builder/">sublime c++ builder</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>RT, just mark</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">  "<span class="attribute">cmd</span>": <span class="value">[<span class="string">"g++"</span>, <span class="string">"${file}"</span>, <span class="string">"-o"</span>, <span class="string">"${file_path}/${file_base_name}"</span>]</span>,</div><div class="line">  "<span class="attribute">file_regex</span>": <span class="value"><span class="string">"^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$"</span></span>,</div><div class="line">  "<span class="attribute">working_dir</span>": <span class="value"><span class="string">"${file_path}"</span></span>,</div><div class="line">  "<span class="attribute">selector</span>": <span class="value"><span class="string">"source.c, source.c++, source.cpp"</span></span>,</div><div class="line">  "<span class="attribute">shell</span>": <span class="value"><span class="literal">true</span></span>,</div><div class="line">  "<span class="attribute">variants</span>":</div><div class="line">  <span class="value">[</span></div><div class="line">    {</div><div class="line">      "<span class="attribute">name</span>": <span class="value"><span class="string">"Run"</span></span>,</div><div class="line">      "<span class="attribute">cmd</span>": <span class="value">[ <span class="string">"start"</span>, <span class="string">"${file_path}/${file_base_name}.exe"</span> ]</span></div><div class="line">    }</div><div class="line">  ]</div><div class="line">}</div></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yedeying999.github.io/2014/04/18/sublime-cpp-builder/" data-id="pcgqnctij40hvmv3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/editor/">editor</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sublime/">sublime</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/archives/2014/page/2/">2</a><a class="page-number" href="/archives/2014/page/3/">3</a><a class="extend next" rel="next" href="/archives/2014/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Yedeying<br>
      <a href="https://github.com/ken8203/hexo-theme-alberta" target="_blank">Alberta</a> by <a href="http://jaychung.tw" target="_blank">jaychung</a>. Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Thank <a href="http://subtlepatterns.com/" target="_blank">Subtlepatterns</a>
    </div>
  </div>
</footer>
    </div>
    
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="//imsky.github.io/holder/holder.js"></script>

  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>


  </div>
</body>
</html>